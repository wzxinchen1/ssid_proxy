<style>
.adv-button {
    display: inline-block;
    padding: 4px 10px;
    background-color: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 3px;
    color: #333;
    font-size: 0.85em;
    cursor: pointer;
    transition: all 0.2s;
}

.adv-button:hover {
    background-color: #e0e0e0;
    border-color: #ccc;
}

.adv-button i {
    margin-right: 3px;
    font-size: 0.9em;
}

.adv-button.active {
    background-color: #e3f2fd;
    border-color: #bbdefb;
    color: #0d47a1;
}
</style>

<%
local expanded = self:cfgvalue(section) and true or false
%>

<button class="adv-button <%= expanded and 'active' or '' %>" 
        data-section="<%= section %>"
        onclick="toggleAdvOptions(this)">
    <i class="icon <%= expanded and 'icon-caret-down' or 'icon-caret-right' %>"></i>
    <%= expanded and '收起高级' or '高级选项' %>
</button>

<script>
function toggleAdvOptions(btn) {
    const section = btn.getAttribute('data-section');
    const container = document.querySelector(`.adv-container[data-section="${section}"]`);
    const icon = btn.querySelector('i');
    
    if (container.style.display === 'none' || container.style.display === '') {
        container.style.display = 'block';
        btn.classList.add('active');
        icon.className = 'icon icon-caret-down';
    } else {
        container.style.display = 'none';
        btn.classList.remove('active');
        icon.className = 'icon icon-caret-right';
    }
}
</script>
